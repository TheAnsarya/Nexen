# Session Log: 2026-02-13 Session 01

## CI/CD Pipeline Fixes - Releases v1.1.2 → v1.1.4

**Branch:** master
**Issue:** #238 (closed)
**Final Tag:** v1.1.4
**Commits:**
- `d1e32f2e` — `fix(ci): disable macOS AOT builds temporarily (#238)`
- `108493aa` — `fix(ci): correct Windows artifact upload paths`
- `681b98e0` — `fix(ci): use explicit output directory for Windows publish`

## Summary

Fixed multiple CI/CD pipeline issues that were blocking releases:
1. macOS AOT builds failing due to .NET 10 ILC compiler bug (v1.1.2)
2. Windows artifacts not uploading due to incorrect path in workflow (v1.1.3, v1.1.4)

## Issue 1: macOS AOT ILC Crash

The GitHub Actions release job has `needs: [windows, linux, appimage, macos]`, requiring ALL platform jobs to pass. The macOS AOT job was failing with:

```text
.../ilc" @"obj/Release/native/Nexen.ilc.rsp"" exited with code 139
```

Exit code 139 = SIGSEGV in the .NET IL Compiler. This is a bug in .NET 10.0.3's AOT compiler, not in Nexen code.

**Fix:** Removed `clang_aot` from macOS build matrix in `.github/workflows/build.yml`

## Issue 2: Windows Artifacts Not Uploading

After fixing macOS AOT, the release v1.1.2 was created but **Windows assets were missing**. Investigation revealed:

1. The workflow expected artifacts at `build/TmpReleaseBuild/Nexen.exe`
2. But `dotnet publish` was outputting to `D:\bin\win-x64\Release\win-x64\publish\` on CI runners
3. The `$(SolutionDir)` MSBuild variable was resolving incorrectly on GitHub Actions

**Attempted fix (v1.1.3):** Changed artifact path to `bin/win-x64/Release/win-x64/publish/Nexen.exe` - **FAILED** because the `D:\bin\` path was outside the checkout directory (`D:\a\Nexen\Nexen\`).

**Final fix (v1.1.4):** Added explicit `-o build/publish` to the `dotnet publish` command to force output within the repo directory.

## Files Modified

| File | Change |
|------|--------|
| `.github/workflows/build.yml` | Removed macOS AOT + fixed Windows publish path |
| `README.md` | Updated macOS AOT row to show unavailable |
| `CHANGELOG.md` | Added v1.1.2, v1.1.3, v1.1.4 release notes |
| `~docs/plans/ci-cd-build-failures-analysis.md` | Created detailed analysis document |

## Release Assets (v1.1.4)

All 10 expected assets successfully uploaded:

| Asset | Size |
|-------|------|
| `Nexen-Windows-x64.exe` | 32 MB |
| `Nexen-Windows-x64-AoT.exe` | 73 MB |
| `Nexen-Linux-x64.AppImage` | 80 MB |
| `Nexen-Linux-ARM64.AppImage` | 75 MB |
| `Nexen-Linux-x64` | 20 MB |
| `Nexen-Linux-ARM64` | 20 MB |
| `Nexen-Linux-x64-AoT` | 39 MB |
| `Nexen-Linux-x64-gcc` | 19 MB |
| `Nexen-Linux-ARM64-gcc` | 18 MB |
| `Nexen-macOS-ARM64.zip` | 63 MB |

## Deleted Releases

- v1.1.2 — Deleted (Windows assets missing)
- v1.1.3 — Deleted (Windows artifacts still failed to upload)

## Future Work

When .NET releases an ILC fix:

1. Re-add `clang_aot` to the macOS build matrix
2. Uncomment the release asset copy line
3. Update README to show macOS AOT as available
4. Test with a pre-release tag first

## References

- [Issue #238](https://github.com/TheAnsarya/Nexen/issues/238)
- [Release v1.1.4](https://github.com/TheAnsarya/Nexen/releases/tag/v1.1.4)
- [Analysis Document](../plans/ci-cd-build-failures-analysis.md)
